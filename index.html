<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Генератор бейджей</title>
    <meta name="description" content="Современный оффлайн генератор бейджей для конференций и мероприятий.">
    <link rel="stylesheet" href="assets/css/main.css">
    <style id="activeTemplateStyle"></style>
    <style id="layoutStyle"></style>
</head>
<body>
<div class="app">
    <header class="app-header">
        <div class="brand">
            <h1>Badge Studio</h1>
            <p>Быстрый оффлайн инструмент для подготовки бейджей прямо в браузере.</p>
        </div>
        <div class="header-actions">
            <button id="exportButton" class="ghost">Экспортировать JSON</button>
            <button id="printButton" class="primary">Печать</button>
        </div>
    </header>

    <main class="app-main">
        <aside class="sidebar">
            <section class="panel">
                <header class="panel-header">
                    <h2>Шаблон</h2>
                </header>
                <div class="panel-body">
                    <label class="field">
                        <span>Текущий шаблон</span>
                        <select id="templateSelect"></select>
                    </label>
                    <p class="template-description" id="templateDescription"></p>
                    <div class="panel-actions">
                        <button id="customizeTemplateButton" class="ghost">Настроить шаблон</button>
                    </div>
                </div>
            </section>

            <section class="panel">
                <header class="panel-header">
                    <h2>Макет</h2>
                </header>
                <div class="panel-body" id="layoutSettings">
                    <label class="field">
                        <span>Формат страницы</span>
                        <select id="pageSizeSelect">
                            <option value="A4">A4</option>
                            <option value="Letter">Letter</option>
                            <option value="Custom">Свои размеры</option>
                        </select>
                    </label>
                    <div class="inline-fields" id="customPageSizeFields">
                        <label class="field">
                            <span>Ширина, мм</span>
                            <input type="number" id="customPageWidth" min="50" max="1000" step="0.1">
                        </label>
                        <label class="field">
                            <span>Высота, мм</span>
                            <input type="number" id="customPageHeight" min="50" max="1000" step="0.1">
                        </label>
                    </div>

                    <fieldset class="field">
                        <legend>Ориентация</legend>
                        <label>
                            <input type="radio" name="orientation" value="portrait">
                            <span>Книжная</span>
                        </label>
                        <label>
                            <input type="radio" name="orientation" value="landscape">
                            <span>Альбомная</span>
                        </label>
                    </fieldset>

                    <div class="inline-fields">
                        <label class="field">
                            <span>Ширина бейджа, мм</span>
                            <input type="number" id="badgeWidth" min="20" max="300" step="0.1">
                        </label>
                        <label class="field">
                            <span>Высота бейджа, мм</span>
                            <input type="number" id="badgeHeight" min="20" max="300" step="0.1">
                        </label>
                    </div>

                    <div class="field">
                        <span>Стандартные размеры</span>
                        <div class="size-presets" id="badgeSizePresets"></div>
                    </div>

                    <label class="field">
                        <span>Отступ между бейджами, мм</span>
                        <input type="number" id="badgeGap" min="0" max="25" step="0.5">
                    </label>

                    <label class="field">
                        <span>Поля страницы, мм</span>
                        <input type="number" id="pageMargin" min="0" max="25" step="0.5">
                    </label>
                </div>
            </section>

            <section class="panel">
                <header class="panel-header">
                    <h2>Данные</h2>
                </header>
                <div class="panel-body data-tools">
                    <button id="importButton" class="ghost">Импортировать JSON</button>
                    <button id="clearParticipantsButton" class="ghost danger">Очистить список</button>
                    <button id="resetSettingsButton" class="ghost">Сбросить настройки</button>
                    <button id="clearStorageButton" class="ghost danger">Сбросить всё</button>
                </div>
            </section>

            <section class="panel participants-panel">
                <header class="panel-header">
                    <h2>Участники</h2>
                    <div class="panel-header-actions">
                        <button id="addParticipantButton" class="primary">Добавить</button>
                    </div>
                </header>
                <div class="panel-body">
                    <label class="field">
                        <span>Поиск</span>
                        <input type="search" id="participantSearch" placeholder="Имя, компания...">
                    </label>
                    <div class="selection-tools">
                        <button data-action="select-all" class="ghost">Выбрать всех</button>
                        <button data-action="clear-selection" class="ghost">Снять выделение</button>
                        <button data-action="invert-selection" class="ghost">Инвертировать</button>
                    </div>
                    <button id="deleteSelectedButton" class="ghost danger">Удалить выбранных</button>
                    <div id="participantList" class="participant-list" aria-live="polite"></div>
                </div>
            </section>
        </aside>

        <section class="preview">
            <div class="preview-toolbar">
                <h2>Предпросмотр</h2>
                <div id="previewInfo" class="preview-info"></div>
            </div>
            <div id="printArea" class="print-area"></div>
        </section>
    </main>
</div>

<dialog id="participantDialog">
    <form method="dialog" id="participantForm" class="dialog-form">
        <header>
            <h3 id="participantDialogTitle">Участник</h3>
        </header>
        <div class="dialog-body" id="participantFormFields"></div>
        <footer>
            <div class="dialog-actions">
                <button value="cancel" class="ghost">Отмена</button>
                <button type="submit" class="primary">Сохранить</button>
            </div>
        </footer>
    </form>
</dialog>

<dialog id="importDialog">
    <form method="dialog" id="importForm" class="dialog-form">
        <header>
            <h3>Импорт участников</h3>
            <p>Вставьте JSON массив объектов. Пример: <code>[{"name":"Имя"}]</code></p>
        </header>
        <div class="dialog-body">
            <textarea id="importTextarea" rows="12" placeholder="[{ &quot;name&quot;: &quot;Имя Фамилия&quot; }]"></textarea>
        </div>
        <footer>
            <div class="dialog-actions">
                <button value="cancel" class="ghost">Отмена</button>
                <button type="submit" class="primary">Импортировать</button>
            </div>
        </footer>
    </form>
</dialog>

<dialog id="templateEditorDialog">
    <form method="dialog" id="templateEditorForm" class="dialog-form template-form">
        <header>
            <h3 id="templateEditorTitle">Новый шаблон</h3>
            <p>Используйте плейсхолдеры вида <code>{{поле}}</code> внутри разметки.</p>
        </header>
        <div class="dialog-body">
            <label class="field">
                <span>Название</span>
                <input type="text" id="templateName" required>
            </label>
            <label class="field">
                <span>Описание</span>
                <input type="text" id="templateDescriptionInput">
            </label>
            <div class="field">
                <div class="field-label">
                    <span>Поля</span>
                    <button type="button" id="addTemplateFieldButton" class="ghost small">Добавить поле</button>
                </div>
                <div id="templateFieldsContainer" class="template-fields"></div>
            </div>
            <label class="field">
                <span>Ширина бейджа, мм</span>
                <input type="number" id="templateBadgeWidth" min="20" max="300" step="0.1" required>
            </label>
            <label class="field">
                <span>Высота бейджа, мм</span>
                <input type="number" id="templateBadgeHeight" min="20" max="300" step="0.1" required>
            </label>
            <label class="field">
                <span>Разметка</span>
                <textarea id="templateMarkup" rows="10" class="code"></textarea>
            </label>
            <label class="field">
                <span>Стили</span>
                <textarea id="templateStyles" rows="10" class="code"></textarea>
            </label>
        </div>
        <footer>
            <div class="dialog-actions">
                <button value="cancel" class="ghost">Отмена</button>
                <div class="spacer"></div>
                <button type="button" id="deleteTemplateButton" class="ghost danger">Удалить</button>
                <button type="submit" class="primary">Сохранить</button>
            </div>
        </footer>
    </form>
</dialog>

<script src="assets/js/utils.js"></script>
<script src="assets/js/template-presets.js"></script>
<script src="assets/js/storage.js"></script>
<script src="assets/js/template-manager.js"></script>
<script src="assets/js/state.js"></script>
<script src="assets/js/main.js"></script>
</body>
</html>
